# äº¤æ˜“è¾“å…¥æ¨¡å— (Transaction Input Module)

## ğŸ“ æ¨¡å—æ¦‚è¿°

äº¤æ˜“è¾“å…¥æ¨¡å—è´Ÿè´£å¤„ç†ç”¨æˆ·çš„æ”¶å…¥/æ”¯å‡ºè®°å½•ï¼Œç‰¹è‰²æ˜¯åˆ›æ–°çš„æ‹–æ‹½å¼åˆ†ç±»é€‰æ‹©ã€‚

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. è¾“å…¥æµç¨‹
1. **é‡‘é¢è¾“å…¥** - è¾“å…¥äº¤æ˜“é‡‘é¢
2. **æè¿°è¾“å…¥** - æ·»åŠ äº¤æ˜“æè¿°ï¼ˆå¯é€‰ï¼‰
3. **åˆ†ç±»é€‰æ‹©** - æ‹–æ‹½ç™½ç‚¹åˆ°ç¯çŠ¶å›¾é€‰æ‹©åˆ†ç±»
4. **ç¡®è®¤æäº¤** - ä¿å­˜äº¤æ˜“è®°å½•

### 2. æ‹–æ‹½å¼åˆ†ç±»é€‰æ‹©
- ç¯çŠ¶å›¾å±•ç¤ºæ‰€æœ‰åˆ†ç±»
- æ‹–æ‹½ç™½ç‚¹åˆ°å¯¹åº”åˆ†ç±»åŒºåŸŸ
- æ‚¬åœæ—¶é«˜äº®æ˜¾ç¤º
- æ‹–åˆ°åœ†ç¯å¤–åˆ›å»ºæ–°åˆ†ç±»

## ğŸ“ ç›®å½•ç»“æ„

```
transaction_input/
â”œâ”€â”€ presentation/              # è¡¨ç°å±‚
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ transaction_input_page.dart    # è¾“å…¥ä¸»é¡µé¢
â”‚   â”‚   â””â”€â”€ input_mode_selector.dart       # è¾“å…¥æ¨¡å¼é€‰æ‹©
â”‚   â”œâ”€â”€ widgets/
â”‚   â”‚   â”œâ”€â”€ amount_input/                  # é‡‘é¢è¾“å…¥ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ amount_field.dart         # è¾“å…¥æ¡†
â”‚   â”‚   â”‚   â”œâ”€â”€ calculator_pad.dart       # è®¡ç®—å™¨é”®ç›˜
â”‚   â”‚   â”‚   â””â”€â”€ amount_formatter.dart     # æ ¼å¼åŒ–
â”‚   â”‚   â”œâ”€â”€ category_selector/             # åˆ†ç±»é€‰æ‹©ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ drag_selector.dart        # æ‹–æ‹½é€‰æ‹©å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ ring_chart.dart           # ç¯çŠ¶å›¾
â”‚   â”‚   â”‚   â”œâ”€â”€ category_creator.dart     # æ–°å»ºåˆ†ç±»
â”‚   â”‚   â”‚   â””â”€â”€ category_list.dart        # åˆ†ç±»åˆ—è¡¨
â”‚   â”‚   â””â”€â”€ animations/                    # åŠ¨ç”»æ•ˆæœ
â”‚   â”‚       â”œâ”€â”€ drag_feedback.dart        # æ‹–æ‹½åé¦ˆ
â”‚   â”‚       â”œâ”€â”€ success_animation.dart    # æˆåŠŸåŠ¨ç”»
â”‚   â”‚       â””â”€â”€ hover_effects.dart        # æ‚¬åœæ•ˆæœ
â”‚   â””â”€â”€ providers/
â”‚       â”œâ”€â”€ input_provider.dart            # è¾“å…¥çŠ¶æ€
â”‚       â””â”€â”€ drag_state_provider.dart       # æ‹–æ‹½çŠ¶æ€
â””â”€â”€ domain/                    # é¢†åŸŸå±‚
    â”œâ”€â”€ input_validator.dart   # è¾“å…¥éªŒè¯
    â”œâ”€â”€ category_manager.dart  # åˆ†ç±»ç®¡ç†
    â””â”€â”€ drag_calculator.dart   # æ‹–æ‹½è®¡ç®—
```

## ğŸ¨ æ‹–æ‹½ç³»ç»Ÿè¯¦è§£

### è§’åº¦è®¡ç®—
```dart
// å°†æ‹–æ‹½ä½ç½®è½¬æ¢ä¸ºåˆ†ç±»ç´¢å¼•
int calculateCategoryIndex(Offset position) {
  final angle = calculateAngle(position);
  final categoryAngle = 360 / categories.length;
  return (angle / categoryAngle).floor();
}
```

### åˆ†ç±»æ˜ å°„
- 0-30Â°ï¼šåˆ†ç±»1
- 30-60Â°ï¼šåˆ†ç±»2
- ...ä»¥æ­¤ç±»æ¨

### åˆ›å»ºæ–°åˆ†ç±»
- æ‹–æ‹½åˆ°åœ†ç¯å¤–è§¦å‘
- å¼¹å‡ºåˆ›å»ºå¯¹è¯æ¡†
- æ”¯æŒè‡ªå®šä¹‰åç§°å’Œé¢œè‰²

## ğŸ’¡ å…³é”®ç‰¹æ€§

### 1. æ™ºèƒ½æç¤º
- æ‹–æ‹½æ—¶æ˜¾ç¤ºåˆ†ç±»åç§°
- é‡‘é¢å®æ—¶æ ¼å¼åŒ–
- é”™è¯¯å³æ—¶åé¦ˆ

### 2. æµç•…åŠ¨ç”»
- æ‹–æ‹½è½¨è¿¹åŠ¨ç”»
- åˆ†ç±»æ‚¬åœæ”¾å¤§
- æˆåŠŸæäº¤åŠ¨ç”»

### 3. ç”¨æˆ·ä½“éªŒ
- æ”¯æŒæ‰‹åŠ¿å–æ¶ˆ
- è‡ªåŠ¨ä¿å­˜è‰ç¨¿
- å¿«é€Ÿé‡å¤è¾“å…¥

## ğŸ”§ é…ç½®å‚æ•°

```dart
// å¯é…ç½®çš„å‚æ•°
const dragSensitivity = 0.5;        // æ‹–æ‹½çµæ•åº¦
const hoverDuration = 200;          // æ‚¬åœæ£€æµ‹æ—¶é—´
const animationDuration = 300;      // åŠ¨ç”»æ—¶é•¿
const ringChartRadius = 120.0;      // ç¯çŠ¶å›¾åŠå¾„
```

## ğŸ”— ä¾èµ–å…³ç³»

- è¢«`jars/`æ¨¡å—è°ƒç”¨æ˜¾ç¤ºè¾“å…¥ç•Œé¢
- ä¾èµ–`core/`å±‚ä¿å­˜äº¤æ˜“æ•°æ®
- ä½¿ç”¨`shared/`å±‚çš„é€šç”¨ç»„ä»¶